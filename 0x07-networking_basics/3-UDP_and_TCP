#!/usr/bin/env bash

# Function to prompt the user and record the answer
ask_question() {
  echo "$1"
  read -r answer
  echo "$answer" >> answer_file
  echo >> answer_file
}

# Clear previous answer_file if it exists
> answer_file

# Ask questions and record answers
ask_question "Which statement is correct for the TCP box?"
ask_question "1. It is a protocol that is transferring data in a slow way but surely"
ask_question "2. It is a protocol that is transferring data in a fast way and might lose data along in the process"

ask_question "Which statement is correct for the UDP box?"
ask_question "1. It is a protocol that is transferring data in a slow way but surely"
ask_question "2. It is a protocol that is transferring data in a fast way and might lose data along in the process"

ask_question "Which statement is correct for the TCP worker?"
ask_question "1. Have you received boxes x, y, z?"
ask_question "2. May I increase the rate at which I am sending you boxes?"

# Validate answers
echo "Validating answers..."
expected_answers=("1" "2" "1") # The correct answers for the questions

if diff -q answer_file <(printf '%s\n' "${expected_answers[@]}") >/dev/null; then
  echo "All answers are correct. Task completed."
else
  echo "Some answers are incorrect. Please review your answers."
fi

# Remove the answer_file
rm answer_file
